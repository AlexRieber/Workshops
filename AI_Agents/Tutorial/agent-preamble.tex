% =============================================================================
%  agent-preamble.tex â€” Professional styling for Agent Workshop Howto (PDF)
% =============================================================================

% ---------- fonts (fontspec for XeLaTeX) ------------------------------------
\usepackage{fontspec}
\setmainfont{TeX Gyre Termes}
\setsansfont{TeX Gyre Heros}
\setmonofont{TeX Gyre Cursor}

% ---------- packages --------------------------------------------------------
\usepackage[many]{tcolorbox}
\usepackage{fontawesome5}
\usepackage{fancyhdr}
\usepackage{titlesec}
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{enumitem}

% ---------- colour palette --------------------------------------------------
\definecolor{agentblue}{HTML}{4299E1}
\definecolor{agentdark}{HTML}{2D3748}
\definecolor{agentgray}{HTML}{4A5568}
\definecolor{lightblue}{HTML}{EBF4FF}
\definecolor{lightgray}{HTML}{F7FAFC}
\definecolor{tipgreen}{HTML}{38A169}
\definecolor{tipbg}{HTML}{F0FFF4}
\definecolor{warnred}{HTML}{E53E3E}
\definecolor{warnbg}{HTML}{FFF5F5}
\definecolor{notebg}{HTML}{FFFFF0}
\definecolor{noteamber}{HTML}{D69E2E}
\definecolor{claudepurple}{HTML}{7C3AED}
\definecolor{claudebg}{HTML}{F5F3FF}
\definecolor{geminibg}{HTML}{ECFDF5}
\definecolor{geminigreen}{HTML}{059669}

% ---------- tcolorbox styles ------------------------------------------------
\tcbset{
  agentbox/.style={
    enhanced,
    breakable,
    boxrule=0.5pt,
    arc=4pt,
    left=8pt, right=8pt, top=6pt, bottom=6pt,
    fonttitle=\bfseries\sffamily,
    before skip=8pt,
    after skip=8pt,
    parbox=false,
  },
}

% Claude Code box (purple)
\newtcolorbox{claudebox}[1][]{%
  agentbox,
  colback=claudebg,
  colframe=claudepurple,
  coltitle=white,
  colbacktitle=claudepurple,
  title={\faTerminal\hspace{6pt}Claude Code},
  #1
}

% Gemini CLI box (green)
\newtcolorbox{geminibox}[1][]{%
  agentbox,
  colback=geminibg,
  colframe=geminigreen,
  coltitle=white,
  colbacktitle=geminigreen,
  title={\faTerminal\hspace{6pt}Gemini CLI},
  #1
}

% Codex CLI box (dark gray)
\definecolor{codexbg}{HTML}{F5F5F5}
\definecolor{codexgray}{HTML}{374151}
\newtcolorbox{codexbox}[1][]{%
  agentbox,
  colback=codexbg,
  colframe=codexgray,
  coltitle=white,
  colbacktitle=codexgray,
  title={\faTerminal\hspace{6pt}Codex CLI},
  #1
}

% ---------- page layout (fancyhdr) ------------------------------------------
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\small\sffamily\color{agentgray}AI Coding Agents Workshop}
\fancyhead[R]{\small\sffamily\color{agentgray}\thepage}
\fancyfoot[C]{\footnotesize\sffamily\color{agentgray}From Messy Code to AER-Ready Package}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\headrule}{\hbox to\headwidth{%
  \color{agentblue}\leaders\hrule height \headrulewidth\hfill}}
\renewcommand{\footrulewidth}{0pt}

\fancypagestyle{plain}{%
  \fancyhf{}
  \fancyhead[L]{\small\sffamily\color{agentgray}AI Coding Agents Workshop}
  \fancyhead[R]{\small\sffamily\color{agentgray}\thepage}
  \fancyfoot[C]{\footnotesize\sffamily\color{agentgray}From Messy Code to AER-Ready Package}
  \renewcommand{\headrulewidth}{0.4pt}
  \renewcommand{\headrule}{\hbox to\headwidth{%
    \color{agentblue}\leaders\hrule height \headrulewidth\hfill}}
}

% ---------- section headings (titlesec) -------------------------------------
\titleformat{\section}
  {\LARGE\bfseries\sffamily\color{agentdark}}
  {\thesection}{0.6em}{}
  [\vspace{2pt}{\color{agentblue}\titlerule[1.5pt]}]

\titleformat{\subsection}
  {\large\bfseries\sffamily\color{agentdark}}
  {\thesubsection}{0.5em}{}

\titleformat{\subsubsection}
  {\normalsize\bfseries\sffamily\color{agentgray}}
  {\thesubsubsection}{0.5em}{}

\titleformat{\paragraph}[runin]
  {\normalsize\bfseries\sffamily\color{agentgray}}
  {\theparagraph}{0.5em}{}[.]
\titlespacing*{\paragraph}{0pt}{3.25ex plus 1ex minus .2ex}{0.5em}

\titleformat{\subparagraph}[runin]
  {\normalsize\itshape\color{agentgray}}
  {\thesubparagraph}{0.5em}{}[.]
\titlespacing*{\subparagraph}{0pt}{2.25ex plus 1ex minus .2ex}{0.5em}

% ---------- fix headheight for fancyhdr -------------------------------------
\setlength{\headheight}{14pt}

% ---------- table styling ---------------------------------------------------
\renewcommand{\arraystretch}{1.35}

% ---------- tighter lists ---------------------------------------------------
\setlist{nosep, leftmargin=1.5em}

% ---------- allow line breaks in monospace within tables --------------------
\tolerance=1000
\emergencystretch=1.5em

% ---------- code-block overflow helper --------------------------------------
\usepackage{fvextra}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{
  breaklines, breakanywhere, commandchars=\\\{\}
}
